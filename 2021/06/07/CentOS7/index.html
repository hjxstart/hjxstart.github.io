<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CentOS7 | 黄金贤的博客</title>
  <meta name="keywords" content="">
  <meta name="description" content="CentOS7 | 黄金贤的博客">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="概述# PHP是一种运行在服务器端的脚步语言，可以嵌入到HTML中。是一中面向对象的、解释的。7.3版本比较好用 # 1994年   环境准备# 安装 PhpStorm # https:&#x2F;&#x2F;3.jetbra.in&#x2F; 下载安装包 jetbra.zip 解压后放在 PhpStorm 的bin目录下, 为 jetbra 目录 # 双击 \bin\jetbra\scripts\install-all-us">
<meta property="og:type" content="article">
<meta property="og:title" content="Php">
<meta property="og:url" content="https://hjxstart.github.io/2025/09/13/Php/index.html">
<meta property="og:site_name" content="黄金贤的博客">
<meta property="og:description" content="概述# PHP是一种运行在服务器端的脚步语言，可以嵌入到HTML中。是一中面向对象的、解释的。7.3版本比较好用 # 1994年   环境准备# 安装 PhpStorm # https:&#x2F;&#x2F;3.jetbra.in&#x2F; 下载安装包 jetbra.zip 解压后放在 PhpStorm 的bin目录下, 为 jetbra 目录 # 双击 \bin\jetbra\scripts\install-all-us">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/hjxstart/PicGo@main/img/20250913234353519.png">
<meta property="article:published_time" content="2025-09-13T15:10:00.000Z">
<meta property="article:modified_time" content="2025-10-08T11:23:27.820Z">
<meta property="article:author" content="黄金贤">
<meta property="article:tag" content="计算机网络 数据库 操作系统 数据结构 算法 Java Nodejs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/hjxstart/PicGo@main/img/20250913234353519.png">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-dark.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>


<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 8.0.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>黄金贤</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/hjxstart"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:hjxstart@126.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=1726283687&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(66)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="运维">
                        
                        运维
                        <small>(20)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="开发">
                        
                        开发
                        <small>(12)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="读书">
                        
                        读书
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="安全">
                        
                        安全
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="工具">
                        
                        工具
                        <small>(10)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="数据库">
                        
                        数据库
                        <small>(5)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="网络">
                        
                        网络
                        <small>(14)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="66">
<input type="hidden" id="yelog_site_word_count" value="244.3k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://github.com/hjxstart">hjxstart</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        <a id="top" class="全部文章 网络 "
           href="/2024/05/06/HCIE%20Lab/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="HCIE Lab">HCIE Lab</span>
            <span class="post-date" title="2024-05-06 19:42:00">2024/05/06</span>
        </a>
        
        <a id="top" class="全部文章 安全 "
           href="/2025/08/17/CISP-PTE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="CISP-PTE">CISP-PTE</span>
            <span class="post-date" title="2025-08-17 11:12:00">2025/08/17</span>
        </a>
        
        <a id="top" class="全部文章 运维 "
           href="/2021/09/09/VMware/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="VMware">VMware</span>
            <span class="post-date" title="2021-09-09 15:38:00">2021/09/09</span>
        </a>
        
        <a id="top" class="全部文章 运维 "
           href="/2025/04/04/PXE-Kickstart/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="PXE+Kickstart">PXE+Kickstart</span>
            <span class="post-date" title="2025-04-04 10:45:00">2025/04/04</span>
        </a>
        
        <a id="top" class="全部文章 运维 "
           href="/2025/02/12/KylinOS/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="KylinOS">KylinOS</span>
            <span class="post-date" title="2025-02-12 16:47:00">2025/02/12</span>
        </a>
        
        <a id="top" class="全部文章 运维 "
           href="/2025/08/24/KylinOS-FAQ/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="KylinOS FAQ">KylinOS FAQ</span>
            <span class="post-date" title="2025-08-24 11:07:00">2025/08/24</span>
        </a>
        
        <a id="top" class="全部文章 运维 "
           href="/2025/08/24/Windows/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Windows">Windows</span>
            <span class="post-date" title="2025-08-24 11:19:00">2025/08/24</span>
        </a>
        
        <a id="top" class="全部文章 运维 "
           href="/2022/03/24/Linux/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Linux">Linux</span>
            <span class="post-date" title="2022-03-24 11:53:00">2022/03/24</span>
        </a>
        
        <a id="top" class="全部文章 工具 "
           href="/2024/07/28/NTLite/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="NTLite">NTLite</span>
            <span class="post-date" title="2024-07-28 21:32:00">2024/07/28</span>
        </a>
        
        <a id="top" class="全部文章 数据库 "
           href="/2020/03/19/MySQL/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="MySQL">MySQL</span>
            <span class="post-date" title="2020-03-19 21:51:00">2020/03/19</span>
        </a>
        
        <a id="top" class="全部文章 开发 "
           href="/2025/09/13/Php/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Php">Php</span>
            <span class="post-date" title="2025-09-13 23:10:00">2025/09/13</span>
        </a>
        
        <a  class="全部文章 安全 "
           href="/2025/08/21/cisp-practice/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="cisp-practice">cisp-practice</span>
            <span class="post-date" title="2025-08-21 19:41:00">2025/08/21</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2025/04/24/OpenStack/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="OpenStack">OpenStack</span>
            <span class="post-date" title="2025-04-24 09:04:00">2025/04/24</span>
        </a>
        
        <a  class="全部文章 安全 "
           href="/2024/08/23/CISO/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="CISO">CISO</span>
            <span class="post-date" title="2024-08-23 19:29:00">2024/08/23</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2024/04/16/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="网络工程师">网络工程师</span>
            <span class="post-date" title="2024-04-16 22:14:00">2024/04/16</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2024/01/27/STP/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="STP">STP</span>
            <span class="post-date" title="2024-01-27 14:01:00">2024/01/27</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2024/01/27/VLAN/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="VLAN">VLAN</span>
            <span class="post-date" title="2024-01-27 11:42:00">2024/01/27</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2024/01/27/LLDP/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="LLDP">LLDP</span>
            <span class="post-date" title="2024-01-27 11:31:00">2024/01/27</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2024/01/27/Telnet/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Telnet">Telnet</span>
            <span class="post-date" title="2024-01-27 10:45:00">2024/01/27</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2024/01/27/SSH/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SSH">SSH</span>
            <span class="post-date" title="2024-01-27 10:44:00">2024/01/27</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2023/12/22/WireGuard/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="WireGuard">WireGuard</span>
            <span class="post-date" title="2023-12-22 07:40:00">2023/12/22</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2023/12/21/Stack-Port/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Stack Port">Stack Port</span>
            <span class="post-date" title="2023-12-21 19:31:00">2023/12/21</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2023/12/18/RouterOS/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="RouterOS">RouterOS</span>
            <span class="post-date" title="2023-12-18 17:05:00">2023/12/18</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2023/12/18/Git/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="GIT">GIT</span>
            <span class="post-date" title="2023-12-18 17:00:00">2023/12/18</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2023/11/30/HelpDesk/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="HelpDesk">HelpDesk</span>
            <span class="post-date" title="2023-11-30 21:21:00">2023/11/30</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2023/11/18/OpenWrt/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="OpenWrt">OpenWrt</span>
            <span class="post-date" title="2023-11-18 17:03:00">2023/11/18</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2023/06/01/HCNP-Lab/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="华为NP网络实验">华为NP网络实验</span>
            <span class="post-date" title="2023-06-01 10:46:04">2023/06/01</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2023/06/01/CCNP-Lab/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="CCNP Lab">CCNP Lab</span>
            <span class="post-date" title="2023-06-01 10:46:00">2023/06/01</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2023/05/13/IBMC/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="IBMC">IBMC</span>
            <span class="post-date" title="2023-05-13 21:04:00">2023/05/13</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2023/04/26/1Panel/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="1Panel">1Panel</span>
            <span class="post-date" title="2023-04-26 14:09:00">2023/04/26</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2023/04/08/HCNA-Lab/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="HCNA Lab">HCNA Lab</span>
            <span class="post-date" title="2023-04-08 11:46:00">2023/04/08</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2023/04/07/CCNA-Lab/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="CCNA Lab">CCNA Lab</span>
            <span class="post-date" title="2023-04-07 20:13:29">2023/04/07</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2023/04/07/OSPF/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="OSPF">OSPF</span>
            <span class="post-date" title="2023-04-07 19:19:00">2023/04/07</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2022/08/12/HomeLab/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="HomeLab">HomeLab</span>
            <span class="post-date" title="2022-08-12 15:09:00">2022/08/12</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2022/08/10/FRP/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="FRP">FRP</span>
            <span class="post-date" title="2022-08-10 10:22:24">2022/08/10</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2022/07/28/WDS-MDT/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="WDS+MDT">WDS+MDT</span>
            <span class="post-date" title="2022-07-28 21:33:00">2022/07/28</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2022/06/21/Anaconda/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Anaconda">Anaconda</span>
            <span class="post-date" title="2022-06-21 20:56:00">2022/06/21</span>
        </a>
        
        <a  class="全部文章 网络 "
           href="/2022/05/25/%E7%BD%91%E7%BB%9C%E8%A7%84%E5%88%92%E5%B8%88/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="网络规划师">网络规划师</span>
            <span class="post-date" title="2022-05-25 11:57:00">2022/05/25</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2022/03/14/influxDB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="InfluxDB">InfluxDB</span>
            <span class="post-date" title="2022-03-14 13:25:00">2022/03/14</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2022/03/06/MongoDB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="MongoDB">MongoDB</span>
            <span class="post-date" title="2022-03-06 17:38:00">2022/03/06</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2021/12/27/VIM/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="VIM">VIM</span>
            <span class="post-date" title="2021-12-27 09:15:00">2021/12/27</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/12/16/vsftpd/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="VSFTPD">VSFTPD</span>
            <span class="post-date" title="2021-12-16 08:49:00">2021/12/16</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2021/10/06/Redis/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="REDIS">REDIS</span>
            <span class="post-date" title="2021-10-06 17:19:00">2021/10/06</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/09/20/K8s-lab/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="K8s_lab">K8s_lab</span>
            <span class="post-date" title="2021-09-20 08:04:00">2021/09/20</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/09/15/K8s/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="K8s">K8s</span>
            <span class="post-date" title="2021-09-15 20:48:00">2021/09/15</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/09/08/Ingress/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Ingress">Ingress</span>
            <span class="post-date" title="2021-09-08 23:56:00">2021/09/08</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/09/08/Harbor/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Harbor">Harbor</span>
            <span class="post-date" title="2021-09-08 18:04:00">2021/09/08</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/08/26/GO/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Go">Go</span>
            <span class="post-date" title="2021-08-26 11:50:00">2021/08/26</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/08/15/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Java多线程">Java多线程</span>
            <span class="post-date" title="2021-08-15 14:36:00">2021/08/15</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/08/11/Nginx/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Nginx">Nginx</span>
            <span class="post-date" title="2021-08-11 23:28:00">2021/08/11</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/08/06/Maven/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Maven">Maven</span>
            <span class="post-date" title="2021-08-06 09:38:00">2021/08/06</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/07/31/Springboot%E9%A1%B9%E7%9B%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Springboot项目">Springboot项目</span>
            <span class="post-date" title="2021-07-31 19:34:00">2021/07/31</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/07/22/Docker/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Docker">Docker</span>
            <span class="post-date" title="2021-07-22 14:53:00">2021/07/22</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/07/19/SpringSecurity/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SpringSecurity">SpringSecurity</span>
            <span class="post-date" title="2021-07-19 20:58:00">2021/07/19</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/07/13/Mybatis/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Mybatis">Mybatis</span>
            <span class="post-date" title="2021-07-13 10:38:00">2021/07/13</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/07/05/NVM/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="NVM">NVM</span>
            <span class="post-date" title="2021-07-05 08:15:00">2021/07/05</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/06/26/Java-Project/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Java Project">Java Project</span>
            <span class="post-date" title="2021-06-26 07:58:00">2021/06/26</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/06/23/Vue/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Vue">Vue</span>
            <span class="post-date" title="2021-06-23 10:48:00">2021/06/23</span>
        </a>
        
        <a  class="全部文章 开发 "
           href="/2021/06/08/SpringBoot2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SpringBoot2">SpringBoot2</span>
            <span class="post-date" title="2021-06-08 16:51:00">2021/06/08</span>
        </a>
        
        <a  class="全部文章 运维 "
           href="/2021/06/07/CentOS7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="CentOS7">CentOS7</span>
            <span class="post-date" title="2021-06-07 23:16:00">2021/06/07</span>
        </a>
        
        <a  class="全部文章 读书 "
           href="/2021/04/18/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="设计模式">设计模式</span>
            <span class="post-date" title="2021-04-18 22:19:00">2021/04/18</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2021/03/22/SQL/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SQL">SQL</span>
            <span class="post-date" title="2021-03-22 18:33:00">2021/03/22</span>
        </a>
        
        <a  class="全部文章 读书 "
           href="/2021/03/14/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="时间管理">时间管理</span>
            <span class="post-date" title="2021-03-14 21:49:00">2021/03/14</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2021/03/14/Hexo/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hexo">Hexo</span>
            <span class="post-date" title="2021-03-14 08:31:00">2021/03/14</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2020/09/12/UltraISO/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="UltraISO">UltraISO</span>
            <span class="post-date" title="2020-09-12 11:42:00">2020/09/12</span>
        </a>
        
        <a  class="全部文章 工具 "
           href="/2020/09/12/Ventoy/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Ventoy">Ventoy</span>
            <span class="post-date" title="2020-09-12 11:42:00">2020/09/12</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-CentOS7" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">CentOS7</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="运维">运维</a>
            
        </span>
        
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2025-10-08 19:23:27'>2021-06-07 23:16</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:7.2k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-text">安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85"><span class="toc-text">虚拟机安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%86%E5%8C%BA"><span class="toc-text">1.分区</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%B0%8F%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-text">最小安装配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-net-tools"><span class="toc-text">1.安装 net-tools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85-openssh%E3%80%81openssl-%E5%B9%B6%E5%90%AF%E5%8A%A8"><span class="toc-text">2.安装 openssh、openssl 并启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85-vim"><span class="toc-text">3.安装 vim</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AE%89%E8%A3%85-wget"><span class="toc-text">4.安装 wget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%AE%89%E8%A3%85-gcc-%E7%BC%96%E8%AF%91%E5%A5%97%E4%BB%B6"><span class="toc-text">5.安装 gcc 编译套件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96"><span class="toc-text">系统优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%85%B3%E9%97%AD-selinux"><span class="toc-text">1.关闭 selinux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9B%B4%E6%94%B9%E4%B8%BA%E9%98%BF%E9%87%8C-yum-%E6%BA%90"><span class="toc-text">2.更改为阿里 yum 源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BC%98%E5%8C%96-ssh-%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E9%85%8D%E7%BD%AE"><span class="toc-text">3.优化 ssh 远程登录配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E6%95%B0%E5%8F%8A%E7%99%BB%E5%BD%95%E8%B6%85%E6%97%B6%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%AE%BE%E7%BD%AE"><span class="toc-text">4.历史记录数及登录超时环境变量设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%B0%83%E6%95%B4-linux-%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-text">5.调整 linux 描述符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AE%9A%E6%97%B6%E6%B8%85%E7%90%86%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E4%B8%B4%E6%97%B6%E7%9B%AE%E5%BD%95%E5%9E%83%E5%9C%BE%E6%96%87%E4%BB%B6"><span class="toc-text">6.定时清理邮件服务临时目录垃圾文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%86%85%E6%A0%B8%E4%BC%98%E5%8C%96"><span class="toc-text">7.内核优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6"><span class="toc-text">8.安装常用软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F%E5%88%B0%E6%9C%80%E6%96%B0"><span class="toc-text">9.更新系统到最新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E7%94%B5%E8%84%91%E4%B8%8D%E4%BC%91%E7%9C%A0"><span class="toc-text">10.电脑不休眠</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-%E4%B8%AD%E7%9A%84%E6%9D%83%E9%99%90%E3%80%81%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84"><span class="toc-text">Linux 中的权限、用户和组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90"><span class="toc-text">1.修改权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84"><span class="toc-text">2.修改用户和组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E"><span class="toc-text">3.目录说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-PATH-%E8%BF%90%E8%A1%8C%E5%8F%98%E9%87%8F"><span class="toc-text">4.PATH 运行变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%9F%A5%E9%98%85"><span class="toc-text">5.文件内容查阅</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%A1%A3%E6%A1%88%E5%92%8C%E7%9B%AE%E5%BD%95%E7%9A%84%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90%E4%B8%8E%E9%9A%90%E8%97%8F%E6%9D%83%E9%99%90"><span class="toc-text">6.档案和目录的默认权限与隐藏权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E6%9F%A5%E7%9C%8B"><span class="toc-text">7.文件类型查看</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E7%94%A8%E6%88%B7%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-text">8.用户相关命令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E7%BB%84%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">9.组相关命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E6%8C%87%E4%BB%A4%E4%B8%8E%E6%A1%A3%E6%A1%88%E7%9A%84%E6%90%9C%E5%AF%BB"><span class="toc-text">10.指令与档案的搜寻</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-Linux-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%8E%8B%E7%BC%A9%E4%B8%8E%E6%89%93%E5%8C%85%E6%8C%87%E4%BB%A4"><span class="toc-text">11.Linux 常见的压缩与打包指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-Linux-%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">12.Linux 安装软件的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%AE%89%E8%A3%85-JDK8-%E5%92%8C-Tomcat8"><span class="toc-text">13.安装 JDK8 和 Tomcat8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E5%AE%89%E8%A3%85-MySQL8"><span class="toc-text">14.安装 MySQL8</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4"><span class="toc-text">自动化运维</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%BB%B4%E5%9F%BA%E7%A1%80"><span class="toc-text">运维基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-at-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.at 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-at-%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-text">2.at 简单使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-cron-%E7%AE%80%E4%BB%8B"><span class="toc-text">3.cron 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%B3%BB%E7%BB%9F%E7%BA%A7%E7%9A%84%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1"><span class="toc-text">4.系统级的计划任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%94%A8%E6%88%B7%E7%BA%A7%E7%9A%84%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1"><span class="toc-text">5.用户级的计划任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-rsyslog-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86"><span class="toc-text">6.rsyslog 日志管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-logrotate-%E6%97%A5%E5%BF%97%E8%BD%AE%E8%BD%AC"><span class="toc-text">7.logrotate 日志轮转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-sshd"><span class="toc-text">8.sshd</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="虚拟机安装"><a href="#虚拟机安装" class="headerlink" title="虚拟机安装"></a>虚拟机安装</h2><h3 id="1-分区"><a href="#1-分区" class="headerlink" title="1.分区"></a>1.分区</h3><p>&#x2F;blos boot 2M<br>&#x2F;boot 1G<br>&#x2F; 10G 修改为固定<br>&#x2F;home 5G<br>swap 1G</p>
<h2 id="最小安装配置"><a href="#最小安装配置" class="headerlink" title="最小安装配置"></a>最小安装配置</h2><h3 id="1-安装-net-tools"><a href="#1-安装-net-tools" class="headerlink" title="1.安装 net-tools"></a>1.安装 net-tools</h3><pre><code class="hljs shell">yum install net-tools
y
y
ifconfig
language-shell复制代码</code></pre>

<h3 id="2-安装-openssh、openssl-并启动"><a href="#2-安装-openssh、openssl-并启动" class="headerlink" title="2.安装 openssh、openssl 并启动"></a>2.安装 openssh、openssl 并启动</h3><pre><code class="hljs shell">yum install openssh*
y
yum -y install openssl openssl-devel patch
systemctl start sshd
language-shell复制代码</code></pre>

<h3 id="3-安装-vim"><a href="#3-安装-vim" class="headerlink" title="3.安装 vim"></a>3.安装 vim</h3><pre><code class="hljs shell">yum -y install vim
language-shell复制代码</code></pre>

<h3 id="4-安装-wget"><a href="#4-安装-wget" class="headerlink" title="4.安装 wget"></a>4.安装 wget</h3><pre><code class="hljs shell">yum -y install wget
language-shell复制代码</code></pre>

<h3 id="5-安装-gcc-编译套件"><a href="#5-安装-gcc-编译套件" class="headerlink" title="5.安装 gcc 编译套件"></a>5.安装 gcc 编译套件</h3><pre><code class="hljs shell">yum install gcc
y
language-shell复制代码</code></pre>

<h2 id="系统优化"><a href="#系统优化" class="headerlink" title="系统优化"></a>系统优化</h2><h3 id="1-关闭-selinux"><a href="#1-关闭-selinux" class="headerlink" title="1.关闭 selinux"></a>1.关闭 selinux</h3><pre><code class="hljs bash">sed -i <span class="hljs-string">&#x27;s/=enforcing/=disabled/&#x27;</span> /etc/selinux/config
setenforce 0
</code></pre>

<hr>
<h3 id="2-更改为阿里-yum-源"><a href="#2-更改为阿里-yum-源" class="headerlink" title="2.更改为阿里 yum 源"></a>2.更改为阿里 yum 源</h3><pre><code class="hljs bash"><span class="hljs-built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
yum makecache
</code></pre>

<hr>
<h3 id="3-优化-ssh-远程登录配置"><a href="#3-优化-ssh-远程登录配置" class="headerlink" title="3.优化 ssh 远程登录配置"></a>3.优化 ssh 远程登录配置</h3><pre><code class="hljs bash"><span class="hljs-comment">#备份/etc/ssh/sshd_conf</span>
<span class="hljs-built_in">cp</span> /etc/ssh/sshd_config&#123;,.`<span class="hljs-built_in">date</span> +%F`.bak&#125;
<span class="hljs-comment">#不允许基于GSSAPI的用户认证</span>
sed -i <span class="hljs-string">&#x27;s/^GSSAPIAuthentication yes$/GSSAPIAuthentication no/&#x27;</span> /etc/ssh/sshd_config
<span class="hljs-comment"># 不允许sshd对远程主机名进行反向解析</span>
sed -i <span class="hljs-string">&#x27;s/#UseDNS yes/UseDNS no/&#x27;</span> /etc/ssh/sshd_config
systemctl restart sshd
</code></pre>

<h3 id="4-历史记录数及登录超时环境变量设置"><a href="#4-历史记录数及登录超时环境变量设置" class="headerlink" title="4.历史记录数及登录超时环境变量设置"></a>4.历史记录数及登录超时环境变量设置</h3><pre><code class="hljs bash"><span class="hljs-comment"># 设置闲置超时时间为300s</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;export TMOUT=300&#x27;</span> &gt;&gt;/etc/profile
<span class="hljs-comment"># 设置历史记录文件的命令数量为100</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;export HISTFILESIZE=100&#x27;</span> &gt;&gt;/etc/profile

<span class="hljs-comment"># 设置命令行的历史记录数量</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;export HISTSIZE=100&#x27;</span> &gt;&gt;/etc/profile
<span class="hljs-comment"># 格式化输出历史记录(以年月日分时秒的格式输出)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;export HISTTIMEFORMAT=&quot;%Y-%m-%d %H:%M:%S&quot;&#x27;</span> &gt;&gt;/etc/profile
<span class="hljs-built_in">source</span> /etc/profile
<span class="hljs-built_in">tail</span> -4 /etc/profile
</code></pre>

<hr>
<h3 id="5-调整-linux-描述符"><a href="#5-调整-linux-描述符" class="headerlink" title="5.调整 linux 描述符"></a>5.调整 linux 描述符</h3><pre><code class="hljs bash"><span class="hljs-comment">#文件描述符是由无符号整数表示的句柄,进程使用它来标识打开的文件.文件描述符与包括相关信息(如文件的打开模式,文件的位置类型,文件的初始类型等)的文件对象相关联,这些信息被称作文件的上下文.文件描述符的有效范围是0到OPEN_MAX.</span>
<span class="hljs-comment">#对于内核而言,所有打开的文件都是通过文件的描述符引用的.当打开一个现有文件或创建一个新文件时,内核向进程返回一个文件描述符,当读或写一个文件时,使用open或create返回的文件描述符标识该文件,并将其作为参数传递给read或write.</span>
<span class="hljs-comment"># 查看系统文件描述符设置的情况可以使用下面的命令,文件描述符大小默认是1024.</span>
<span class="hljs-built_in">ulimit</span> -n
<span class="hljs-comment"># 对于高并发的业务Linux服务器来说,这个默认的设置值是不够的,需要调整.</span>
<span class="hljs-comment"># 调整方法一:</span>
<span class="hljs-comment"># 调整系统文件描述符为65535</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;*        -    nofile    65535&#x27;</span> &gt;&gt;/etc/security/limits.conf
<span class="hljs-built_in">tail</span> -l /etc/security/limits.conf
<span class="hljs-comment"># 调整方法二:</span>
<span class="hljs-comment"># 直接把ulimit -SHn 65535命令加入/etc/rc.d/rc.local,用以设置每次开机启动时配置生效,命令如下:</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot; ulimit -HSn 65535&quot;</span> &gt;&gt;/etc/rc.d/rc.local
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot; ulimit -s 65535&quot;</span> &gt;&gt;/etc/rc.d/rc.local
</code></pre>

<hr>
<h3 id="6-定时清理邮件服务临时目录垃圾文件"><a href="#6-定时清理邮件服务临时目录垃圾文件" class="headerlink" title="6.定时清理邮件服务临时目录垃圾文件"></a>6.定时清理邮件服务临时目录垃圾文件</h3><pre><code class="hljs bash"><span class="hljs-comment"># centos7默认是安装了Postfix邮件服务的,因此邮件临时存放地点的路径为/var/spool/postfix/maildrop,为了防止目录被垃圾文件填满,导致系统额inode数量不够用,需要定期清理.</span>
<span class="hljs-comment"># 定时清理的方法为:将清理命令写成脚本,然后做成定时任务,每日凌晨0点执行一次.</span>
<span class="hljs-comment"># 创建存放脚本的目录</span>
[ -d /server/scripts/shell ] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;directory already exists.&quot;</span> || <span class="hljs-built_in">mkdir</span> /server/scripts/shell -p

<span class="hljs-comment"># 编写脚本文件</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;find /var/spool/postfix/maildrop/ -type f|xargs rm -f&#x27;</span> &gt;/server/scripts/shell/del_mail_file.sh
<span class="hljs-comment"># 查看</span>
<span class="hljs-built_in">cat</span> /server/scripts/shell/del_mail_file.sh
<span class="hljs-comment"># 加入计划任务</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;00 00 * * * /bin/bash /server/scripts/shell/del_mail_file.sh &gt;/dev/null &amp;1&quot;</span> &gt;&gt;/var/spool/cron/root
crontab -l
</code></pre>

<hr>
<h3 id="7-内核优化"><a href="#7-内核优化" class="headerlink" title="7.内核优化"></a>7.内核优化</h3><p>Linux 服务器内核参数优化,主要是指在 Linux 系统中针对业务服务应用而进行的系统内核参数调整,优化并无一定的标准.下面是生产环境下 Linux 常见的内核优化:</p>
<pre><code class="hljs bash"><span class="hljs-built_in">cat</span> &gt;&gt;/etc/sysctl.conf&lt;&lt;<span class="hljs-string">EOF</span>
<span class="hljs-string">#kernel_flag</span>
<span class="hljs-string">#关闭ipv6</span>
<span class="hljs-string">net.ipv6.conf.all.disable_ipv6 = 1</span>
<span class="hljs-string">net.ipv6.conf.default.disable_ipv6 = 1</span>
<span class="hljs-string"># 避免放大攻击</span>
<span class="hljs-string">net.ipv4.icmp_echo_ignore_broadcasts = 1</span>
<span class="hljs-string"># 开启恶意icmp错误消息保护</span>
<span class="hljs-string">net.ipv4.icmp_ignore_bogus_error_responses = 1</span>
<span class="hljs-string">#关闭路由转发</span>
<span class="hljs-string">#net.ipv4.ip_forward = 0</span>
<span class="hljs-string">#net.ipv4.conf.all.send_redirects = 0</span>
<span class="hljs-string">#net.ipv4.conf.default.send_redirects = 0</span>
<span class="hljs-string">#开启反向路径过滤</span>
<span class="hljs-string">net.ipv4.conf.all.rp_filter = 1</span>
<span class="hljs-string">net.ipv4.conf.default.rp_filter = 1</span>
<span class="hljs-string">#处理无源路由的包</span>
<span class="hljs-string">net.ipv4.conf.all.accept_source_route = 0</span>
<span class="hljs-string">net.ipv4.conf.default.accept_source_route = 0</span>
<span class="hljs-string">#关闭sysrq功能</span>
<span class="hljs-string">kernel.sysrq = 0</span>
<span class="hljs-string">#core文件名中添加pid作为扩展名</span>
<span class="hljs-string">kernel.core_uses_pid = 1</span>
<span class="hljs-string"># 开启SYN洪水攻击保护</span>
<span class="hljs-string">net.ipv4.tcp_syncookies = 1</span>
<span class="hljs-string">#修改消息队列长度</span>
<span class="hljs-string">kernel.msgmnb = 65536</span>
<span class="hljs-string">kernel.msgmax = 65536</span>
<span class="hljs-string">#设置最大内存共享段大小bytes</span>
<span class="hljs-string">kernel.shmmax = 68719476736</span>
<span class="hljs-string">kernel.shmall = 4294967296</span>
<span class="hljs-string">#timewait的数量，默认180000</span>
<span class="hljs-string">net.ipv4.tcp_max_tw_buckets = 6000</span>
<span class="hljs-string">net.ipv4.tcp_sack = 1</span>
<span class="hljs-string">net.ipv4.tcp_window_scaling = 1</span>
<span class="hljs-string">net.ipv4.tcp_rmem = 4096        87380   4194304</span>
<span class="hljs-string">net.ipv4.tcp_wmem = 4096        16384   4194304</span>
<span class="hljs-string">net.core.wmem_default = 8388608</span>
<span class="hljs-string">net.core.rmem_default = 8388608</span>
<span class="hljs-string">net.core.rmem_max = 16777216</span>
<span class="hljs-string">net.core.wmem_max = 16777216</span>
<span class="hljs-string">#每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目</span>
<span class="hljs-string">net.core.netdev_max_backlog = 262144</span>
<span class="hljs-string">#限制仅仅是为了防止简单的DoS 攻击</span>
<span class="hljs-string">net.ipv4.tcp_max_orphans = 3276800</span>
<span class="hljs-string">#未收到客户端确认信息的连接请求的最大值</span>
<span class="hljs-string">net.ipv4.tcp_max_syn_backlog = 262144</span>
<span class="hljs-string">net.ipv4.tcp_timestamps = 0</span>
<span class="hljs-string">#内核放弃建立连接之前发送SYNACK 包的数量</span>
<span class="hljs-string">net.ipv4.tcp_synack_retries = 1</span>
<span class="hljs-string">#内核放弃建立连接之前发送SYN 包的数量</span>
<span class="hljs-string">net.ipv4.tcp_syn_retries = 1</span>
<span class="hljs-string">#启用timewait 快速回收</span>
<span class="hljs-string">net.ipv4.tcp_tw_recycle = 1</span>
<span class="hljs-string">#开启重用。允许将TIME-WAIT sockets 重新用于新的TCP 连接</span>
<span class="hljs-string">net.ipv4.tcp_tw_reuse = 1</span>
<span class="hljs-string">net.ipv4.tcp_mem = 94500000 915000000 927000000</span>
<span class="hljs-string">net.ipv4.tcp_fin_timeout = 1</span>
<span class="hljs-string">#当keepalive 起用的时候，TCP 发送keepalive 消息的频度。缺省是2 小时</span>
<span class="hljs-string">net.ipv4.tcp_keepalive_time = 30</span>
<span class="hljs-string">#允许系统打开的端口范围</span>
<span class="hljs-string">net.ipv4.ip_local_port_range = 1024    65000</span>
<span class="hljs-string">#修改防火墙表大小，默认65536</span>
<span class="hljs-string">#net.netfilter.nf_conntrack_max=655350</span>
<span class="hljs-string">#net.netfilter.nf_conntrack_tcp_timeout_established=1200</span>
<span class="hljs-string"># 确保无人能修改路由表</span>
<span class="hljs-string">#net.ipv4.conf.all.accept_redirects = 0</span>
<span class="hljs-string">#net.ipv4.conf.default.accept_redirects = 0</span>
<span class="hljs-string">#net.ipv4.conf.all.secure_redirects = 0</span>
<span class="hljs-string">#net.ipv4.conf.default.secure_redirects = 0</span>
<span class="hljs-string">EOF</span>
/sbin/sysctl -p
</code></pre>

<hr>
<h3 id="8-安装常用软件"><a href="#8-安装常用软件" class="headerlink" title="8.安装常用软件"></a>8.安装常用软件</h3><pre><code class="hljs bash">yum install lrzsz ntpdate sysstat net-tools wget vim bash-completion dos2unix -y
</code></pre>

<hr>
<h3 id="9-更新系统到最新"><a href="#9-更新系统到最新" class="headerlink" title="9.更新系统到最新"></a>9.更新系统到最新</h3><pre><code class="hljs bash"><span class="hljs-comment"># 更新补丁并升级系统版本</span>
yum update  -y
<span class="hljs-comment"># 只更新安全补丁，不升级系统版本</span>
yum --security check-update    <span class="hljs-comment">#检查是否有安全补丁</span>
</code></pre>

<h3 id="10-电脑不休眠"><a href="#10-电脑不休眠" class="headerlink" title="10.电脑不休眠"></a>10.电脑不休眠</h3><pre><code class="hljs bash">vim  /etc/systemd/logind.conf
<span class="hljs-comment"># 修改为仅锁屏</span>
HandleLidSwitch=lock
<span class="hljs-comment"># 必须要使用如下命令才能使上面的配置生效</span>
systemctl restart systemd-logind
</code></pre>

<hr>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="Linux-中的权限、用户和组"><a href="#Linux-中的权限、用户和组" class="headerlink" title="Linux 中的权限、用户和组"></a>Linux 中的权限、用户和组</h2><h3 id="1-修改权限"><a href="#1-修改权限" class="headerlink" title="1.修改权限"></a>1.修改权限</h3><ol>
<li>字母修改权限</li>
</ol>
<blockquote>
<p>关键字有：[u, g, o, a][+, -][r, w, x]</p>
</blockquote>
<pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> a+w filename.txt
</code></pre>

<ol>
<li>数字修改权限</li>
</ol>
<blockquote>
<p>(r&#x3D;0, w&#x3D;1, x&#x3D;0) &#x3D;&gt; (010&#x3D;2)</p>
</blockquote>
<pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> 222 filename.txt
</code></pre>

<hr>
<h3 id="2-修改用户和组"><a href="#2-修改用户和组" class="headerlink" title="2.修改用户和组"></a>2.修改用户和组</h3><ol>
<li>修改所属用户：chown [-R] 目标用户 文件或文件夹</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">chown</span> username filename.txt
</code></pre>

<ol>
<li>修改所属组：chown [-R] 目标组 文件或文件夹</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">chgrp</span> groupname filename.txt
</code></pre>

<ol>
<li>同时修改所属用户和组：chown [-R] 目标用户 目标组 文件或文件夹</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">chown</span> username:groupname filename.txt
<span class="hljs-comment"># 递归修改，目录包含的子文件或目录也修改</span>
<span class="hljs-built_in">chown</span> -R username:groupname filename.txt
</code></pre>

<hr>
<h3 id="3-目录说明"><a href="#3-目录说明" class="headerlink" title="3.目录说明"></a>3.目录说明</h3><p>bin:可执行命令文件<br>boot:启动文件<br>dev:设备文件<br>etc:配置文件<br>home:用户的目录（每个用户在其下有一个用户的文件夹）<br>lib:库文件<br>media:设备挂载点文件（U 盘）<br>mnt:手动设备挂载点<br>opt:大型软件安装包（源码安装包）<br>usr:软件安装包（类似 Windows 中的 Programfiles）</p>
<hr>
<h3 id="4-PATH-运行变量"><a href="#4-PATH-运行变量" class="headerlink" title="4.PATH 运行变量"></a>4.PATH 运行变量</h3><ol>
<li>查看运行变量：echo $PATH</li>
<li>修改 PATH：PATH&#x3D;$PATH”:&#x2F;home&#x2F;test&#x2F;testDir”, testDir 下的运行文件就可以在系统的任何地方都可以运行。</li>
</ol>
<hr>
<h3 id="5-文件内容查阅"><a href="#5-文件内容查阅" class="headerlink" title="5.文件内容查阅"></a>5.文件内容查阅</h3><ol>
<li>cat: 由第一行开始显示文件内容</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">cat</span> filename
</code></pre>

<ol>
<li>tac: 从最后一行开始显示，可以看出 tac 是 cat 的倒置显示</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">tac</span> filename
</code></pre>

<ol>
<li>nl: 显示的时候，顺道输出行号！</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">nl</span> filename
<span class="hljs-comment"># 等同于</span>
<span class="hljs-built_in">cat</span> -n filename
</code></pre>

<ol>
<li>more: 一页一页的显示文件内容。空格下一页，q 退出。</li>
</ol>
<pre><code class="hljs bash">more filename
</code></pre>

<ol>
<li>less: 与 more 类似，但是比 more 更好的是，他可以通过方向键往前翻页！</li>
</ol>
<pre><code class="hljs bash">less filename
</code></pre>

<ol>
<li>head: 只看头几行</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">head</span> filename
<span class="hljs-built_in">head</span> -3 filename
</code></pre>

<ol>
<li>tail: 只看尾巴几行</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">tail</span> filename
<span class="hljs-comment"># 查看日志是，只查看后几行并实时更新</span>
<span class="hljs-built_in">tail</span> -f filename.log
</code></pre>

<ol>
<li>od: 以二进位的方式读取文件内容（string）</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-built_in">od</span> binfilename
string binfilename
</code></pre>

<hr>
<h3 id="6-档案和目录的默认权限与隐藏权限"><a href="#6-档案和目录的默认权限与隐藏权限" class="headerlink" title="6.档案和目录的默认权限与隐藏权限"></a>6.档案和目录的默认权限与隐藏权限</h3><ol>
<li>文件默认权限：umask,使用默认权限进行过来</li>
</ol>
<p>默认文件权限 666: 110 110 110<br>umask 值为 0 022: 000 010 010<br>默认文件权限 &amp; umask 值 &#x3D; 过滤后的权限<br>过滤文件权限 644: 110 100 100<br>一开始是文件权限(755);默认创建文件夹的权限(644)<br>默认创建文件的权限(666);默认创建文件夹的权限(777)</p>
<pre><code class="hljs bash"><span class="hljs-built_in">umask</span>
<span class="hljs-comment">#0022 # 默认0(标志) 0(谁都不过滤) 2(过滤组的w权限) 2(过滤其他用户的w权限)</span>
<span class="hljs-built_in">umask</span> 000 <span class="hljs-comment"># 修改 umask 值</span>
<span class="hljs-built_in">umask</span> -S
<span class="hljs-comment">#u=rwx,g=r,o=r # umask的理解，umask -S 的命令</span>
</code></pre>

<ol>
<li>文件隐藏权限</li>
</ol>
<p>文件的 i 权限(不能修改)和 a 权限(只能添加)<br>修改隐藏权限: chattr [+-] [attr] 文件或文件夹</p>
<pre><code class="hljs bash">chattr +a <span class="hljs-built_in">dir</span> <span class="hljs-comment"># dir目录下只能添加文件，不能删除文件</span>
chattr +i <span class="hljs-built_in">dir</span> <span class="hljs-comment"># dir目录下不能操作文件</span>
</code></pre>

<hr>
<h3 id="7-文件类型查看"><a href="#7-文件类型查看" class="headerlink" title="7.文件类型查看"></a>7.文件类型查看</h3><ol>
<li>file 命令</li>
</ol>
<pre><code class="hljs bash">file /bin/touch
file /usr/bin/passwd
file /var/lib/mlocate/mlocate.db
</code></pre>

<hr>
<h3 id="8-用户相关命令："><a href="#8-用户相关命令：" class="headerlink" title="8.用户相关命令："></a>8.用户相关命令：</h3><pre><code class="hljs bash"><span class="hljs-built_in">id</span>	<span class="hljs-comment"># 显示当前用户信息</span>
passwd	<span class="hljs-comment"># 修改当前用户的密码</span>
<span class="hljs-built_in">groups</span>	<span class="hljs-comment"># 查看所属组</span>

<span class="hljs-comment">#添加用户：useradd [options] username</span>
<span class="hljs-comment">#选项：	-g	主组 	指定用户所属的用户组</span>
<span class="hljs-comment">#	-G	附属组	指定用户所属的附加组</span>
<span class="hljs-comment">#	-r	等效于--system 表示创建一个系统账号</span>
<span class="hljs-comment">#注：默认不会为系统用户创建对应的主目录</span>

<span class="hljs-comment">#锁定或解锁用户：passwd [options] [username]</span>
<span class="hljs-comment">#如果只提供用户名，则修改当前用户的密码</span>
<span class="hljs-comment">#选项：	-l	锁定用户</span>
<span class="hljs-comment">#	-u	解锁用户</span>
<span class="hljs-comment">#	-d	设置用户无密码，用户下次登陆时系统不再询问密码。</span>
<span class="hljs-comment">#非root用户临时使用root权限：sudo</span>
<span class="hljs-comment">#注：有时需要修改 vim /etc/sudoers, 把用户添加进去才可以</span>
</code></pre>

<hr>
<h3 id="9-组相关命令"><a href="#9-组相关命令" class="headerlink" title="9.组相关命令"></a>9.组相关命令</h3><pre><code class="hljs bash"><span class="hljs-comment"># 1.添加组：groupadd groupname</span>
groupadd javadevgroup
<span class="hljs-comment"># 2.删除组：groupdel [options] groupname</span>
groupdel javadevgroup
<span class="hljs-comment"># 注：-r 同时删除该用户的主目录</span>
<span class="hljs-comment"># 3.修改用户所属组：usermod [options] username</span>
usermod -G javadevgroup hjx
<span class="hljs-comment"># 注：-g 主组	-G 附属组</span>
</code></pre>

<hr>
<h3 id="10-指令与档案的搜寻"><a href="#10-指令与档案的搜寻" class="headerlink" title="10.指令与档案的搜寻"></a>10.指令与档案的搜寻</h3><ol>
<li>查找指令：which 命令</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-comment"># 查找文件：find [查找位置] [查找参数]</span>
<span class="hljs-comment"># 示例：find . -name &quot;s*&quot; 按文件名查找，可使用通配符</span>
<span class="hljs-comment"># 选项：</span>
<span class="hljs-comment">#	-name 查找文件/文件夹名称</span>
<span class="hljs-comment">#	-iname 忽略大小写的名称查找</span>
<span class="hljs-comment">#	-user    查找所属用户的文件</span>
<span class="hljs-comment">#	-group 查找所属组的文件</span>
<span class="hljs-comment">#	-or 或条件</span>
<span class="hljs-built_in">which</span> <span class="hljs-built_in">ls</span>
</code></pre>

<ol>
<li>查找内容：grep（全称 Global Regular Expression Pring）</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-comment"># grep [option] pattern file</span>
<span class="hljs-comment"># 基于正则表达式搜索文本，并吧匹配的行显示出来。如果正则表达式中包括空格，则必须使# 用引号将正则表达式引起来。</span>
<span class="hljs-comment"># 选项:	-n    #显示行号</span>
<span class="hljs-comment">#	-i        #忽略大小写</span>
<span class="hljs-comment">#	-w       # 单词完整匹配</span>
grep <span class="hljs-string">&#x27;linux&#x27;</span> test.txt <span class="hljs-comment">#从文件中查找关键词</span>
grep ^u test.txt <span class="hljs-comment"># 找出以u开头的行</span>
grep hat$   test.txt <span class="hljs-comment"># 找出以hat结尾的行</span>
</code></pre>

<hr>
<h3 id="11-Linux-常见的压缩与打包指令"><a href="#11-Linux-常见的压缩与打包指令" class="headerlink" title="11.Linux 常见的压缩与打包指令"></a>11.Linux 常见的压缩与打包指令</h3><pre><code class="hljs bash"><span class="hljs-comment"># 1. zip压缩（归档）：</span>
<span class="hljs-comment">#	zip [目标压缩文件名] [源文件名]</span>
zip test1to3 test1.txt test2.txt test3.txt
<span class="hljs-comment">#	unzip [压缩文件名]</span>
unzip testto3.zip
<span class="hljs-comment"># 2. gzip压缩 (压缩)：</span>
<span class="hljs-comment">#	gzip [file-list] # 压缩后会删除原始文件，压缩后的文件后缀为.gz</span>
gzip file1 file2
<span class="hljs-comment">#	gzip -d [zip-file-list] # 解压缩文件</span>
gzip -d file.gz
<span class="hljs-comment"># 3. tar (归档)</span>
tar -cvf filename.tar ./dir1 <span class="hljs-comment"># 将dir1目录归档</span>
tar -xvf filename.tar <span class="hljs-comment"># 解压</span>
tar -cvzf filename.tar.gz ./dir1 <span class="hljs-comment">#归档的同时使用gzip压缩</span>
tar -xvzf filename.tar.gz <span class="hljs-comment"># 解压</span>
</code></pre>

<hr>
<h3 id="12-Linux-安装软件的方式"><a href="#12-Linux-安装软件的方式" class="headerlink" title="12.Linux 安装软件的方式"></a>12.Linux 安装软件的方式</h3><pre><code class="hljs bash"><span class="hljs-comment"># 二进制文件的安装，常用于归档的编译好的文件压缩包。（XXX.tar 或者 XXX.tar.gz）</span>
<span class="hljs-comment"># 1. rmp文件安装</span>
rpm(Red-Hat Package Manager)红帽的一种安装包方式
rpm -qa | grep [keywords] <span class="hljs-comment"># 查询是否已经安装某个应用程序</span>
rpm -ivh software.rpm <span class="hljs-comment"># 安装软件 -v显示纤细安装信息， -h 显示进度</span>
rpm -e --nodeps software.rpm <span class="hljs-comment"># 卸载软件 --nodeps表示不检查依赖关系，强制卸载</span>

<span class="hljs-comment"># 2. yum安装：</span>
<span class="hljs-comment"># 是一个rpm的前端程序，使用在线仓库来检索和安装RPM软件包，能够自动解决RPM的依赖关系。</span>
<span class="hljs-comment"># yum list installed | grep [keywords] # 查看是否已经安装某个应用程序</span>
yum search keywords <span class="hljs-comment"># 从仓库中查找软件包</span>
yum install software-name <span class="hljs-comment"># 安装软件包</span>
yum remove software-name <span class="hljs-comment"># 卸载软件包</span>
</code></pre>

<hr>
<h3 id="13-安装-JDK8-和-Tomcat8"><a href="#13-安装-JDK8-和-Tomcat8" class="headerlink" title="13.安装 JDK8 和 Tomcat8"></a>13.安装 JDK8 和 Tomcat8</h3><pre><code class="hljs bash"><span class="hljs-comment"># 1.安装JDK8</span>
<span class="hljs-comment"># 上传文件到 /opt 下，并解压，修改解压文件名称为 jkd8，</span>
<span class="hljs-comment"># 再到/etc/profile中添加环境变量PATH</span>
<span class="hljs-built_in">export</span> PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL
JAVA_HOME=<span class="hljs-string">&quot;/opt/jdk8&quot;</span>
PATH=<span class="hljs-variable">$JAVA_HOME</span><span class="hljs-string">&quot;/bin:&quot;</span><span class="hljs-variable">$PATH</span>

<span class="hljs-comment"># 2.安装Tomcat8，跟JDK8类似</span>
<span class="hljs-built_in">cd</span> /etc/sysconfig/network-scripts
<span class="hljs-comment"># 网卡配置</span>
DEVICE=eth0
HWADDR=00:0C:29:6D:73:FA
TYPE=Ethernet
UUID=ee3f1297-cff6-416d-9bb4-a95939413426
ONBOOT=<span class="hljs-built_in">yes</span>
NM_CONTROLLED=<span class="hljs-built_in">yes</span>
BOOTPROTO=dhcp

<span class="hljs-comment"># 改为</span>
ONBOOT=<span class="hljs-string">&quot;yes&quot;</span>
IPADDR=192.168.18.125
GATEWAY=192.168.18.1
NETMASK=255.255.255.0
DNS1=180.76.76.76
DNS2=114.114.114.114
</code></pre>

<hr>
<h3 id="14-安装-MySQL8"><a href="#14-安装-MySQL8" class="headerlink" title="14.安装 MySQL8"></a>14.安装 MySQL8</h3><pre><code class="hljs bash">rpm -qa | grep mysql <span class="hljs-comment"># 查看老版本mysql</span>
rpm -e --nodeps mysqll-XXXX（一个一个）# 删除老版本mysql
<span class="hljs-built_in">rm</span> -rf /usr/share/mysql <span class="hljs-comment"># 删除mysql的文件</span>
<span class="hljs-built_in">rm</span> -rf /var/lib/mysql <span class="hljs-comment"># 删除mysql文件</span>
<span class="hljs-comment"># 下载并解压在/opt/mysql文件下</span>
tar -xvf mysql-8.0.20-1.el7.x86_64.rpm-bundle.tar

<span class="hljs-comment"># 顺序安装MySql</span>
rpm -ivh mysql-community-common-8.0.20-1.el7.x86_64.rpm
rpm -ivh mysql-community-libs-8.0.20-1.el7.x86_64.rpm --force --nodeps
rpm -ivh mysql-community-client-8.0.20-1.el7.x86_64.rpm --force --nodeps
rpm -ivh mysql-community-server-8.0.20-1.el7.x86_64.rpm --force --nodeps
rpm -ivh mysql-community-devel-8.0.20-1.el7.x86_64.rpm --force --nodeps

<span class="hljs-comment"># Yum安装</span>
wget -i -c https://dev.mysql.com/get/mysql80-community-release-el6-3.noarch.rpm
yum -y install mysql80-community-release-el7-3.noarch.rpm
yum -y install mysql-community-server

service mysqld start <span class="hljs-comment"># 启动服务</span>

<span class="hljs-comment"># root用户的初始密码在/var/log/mysqld.log文件中，查看密码：</span>
grep <span class="hljs-string">&#x27;temporary password&#x27;</span> /var/log/mysqld.log

<span class="hljs-comment"># 重置mysql密码</span>
mysql&gt; alter user <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> identified by <span class="hljs-string">&#x27;password&#x27;</span>;

<span class="hljs-comment"># 重启mysql服务</span>
service mysqld stop
service mysqld start
</code></pre>

<h1 id="自动化运维"><a href="#自动化运维" class="headerlink" title="自动化运维"></a>自动化运维</h1><h2 id="运维基础"><a href="#运维基础" class="headerlink" title="运维基础"></a>运维基础</h2><h3 id="1-at-简介"><a href="#1-at-简介" class="headerlink" title="1.at 简介"></a>1.at 简介</h3><blockquote>
<ol>
<li>at 一次性计划任务只执行一次，一般用于满足临时的任务需求</li>
<li>主要是时间点比较灵活</li>
<li>前提:系统开启 atd 服务</li>
</ol>
</blockquote>
<pre><code class="hljs shell">yum install at
<span class="hljs-meta prompt_"># </span><span class="language-bash">开启服务</span>
systemctl start atd.service
<span class="hljs-meta prompt_"># </span><span class="language-bash">开机自启动</span>
systemctl enable atd.service
<span class="hljs-meta prompt_"># </span><span class="language-bash">查看当前的</span>
systemctl status atd
language-shell复制代码</code></pre>

<h3 id="2-at-简单使用"><a href="#2-at-简单使用" class="headerlink" title="2.at 简单使用"></a>2.at 简单使用</h3><p>定义定时任务 1</p>
<pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">设置当前用户的一次性任务命令</span>
at 23:30
<span class="hljs-meta prompt_"># </span><span class="language-bash">定义定时任务要执行的命令</span>
systemctl restart httpd
language-shell复制代码</code></pre>

<blockquote>
<p><code>注意:</code> 一次性的计划任务使用 ctr+D 来结束提交</p>
</blockquote>
<p>定义定时任务 2</p>
<pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;systemctl restart httpd&quot;</span> | at 23:30
</code></pre>

<p>查看定时任务</p>
<pre><code class="hljs shell">at -l
language-shell复制代码</code></pre>

<p>删除编号为 2 的定时任务</p>
<pre><code class="hljs shell">atrm 2
language-shell复制代码</code></pre>

<blockquote>
<p>使用帮助： <code>at --help</code> 或者 <code>man at</code></p>
</blockquote>
<hr>
<h3 id="3-cron-简介"><a href="#3-cron-简介" class="headerlink" title="3.cron 简介"></a>3.cron 简介</h3><ol>
<li>简介</li>
</ol>
<blockquote>
<ol>
<li>能够周期性地、有规律地执行某些具体的任务</li>
<li>Linux 系统中默认启用的 crond 服务</li>
<li>参数格式</li>
</ol>
</blockquote>
<p><img src="https://hjxstart.github.io/images/2021/06/09/02e49f81-65f9-451b-8aa6-6794e740882d.png" alt="image.png"></p>
<p>image.png</p>
<ol>
<li>crontab 命令书写格式中符号的含义</li>
</ol>
<blockquote>
<ol>
<li><code>*</code> 代表每</li>
<li><code>,</code> 来分别表示多个时间段，例如“8,9,12”表示 8 月、9 月和 12 月</li>
<li><code>-</code> 来表示一段连续的时间周期(例如字段“日”的取值为“12-15”，则表示每月的 12~15 日)</li>
<li><code>/</code> 表示执行任务的间隔时间(例如“*&#x2F;2”表示每隔 2 分钟执行一次任务)</li>
</ol>
</blockquote>
<p>示例</p>
<pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">注释格式<span class="hljs-built_in">who</span>,when,why?</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">每周1，周3，周五的3:25分</span>
25 3 * * 1,3,5 command
<span class="hljs-meta prompt_"># </span><span class="language-bash">每周工作日(周一至周五)1:00</span>
0 1 * * 1-5 command
<span class="hljs-meta prompt_"># </span><span class="language-bash">每隔5分钟</span>
*/5 * * * * command
<span class="hljs-meta prompt_"># </span><span class="language-bash">在上午8点到11点的第3和 第15分钟执行</span>
3,15 8-11 * * *
<span class="hljs-meta prompt_"># </span><span class="language-bash">每隔两天的上午8点到11点的第3 和第15分钟执行</span>
3,15 8-11 */2 * *
language-shell复制代码</code></pre>

<blockquote>
<ol>
<li><code>注意1</code>：如果时上有值，分钟必须有值</li>
<li><code>注意2</code>：定时任务中%无法执行，需要转义%</li>
</ol>
</blockquote>
<hr>
<h3 id="4-系统级的计划任务"><a href="#4-系统级的计划任务" class="headerlink" title="4.系统级的计划任务"></a>4.系统级的计划任务</h3><ol>
<li>简述</li>
</ol>
<blockquote>
<ol>
<li>系统设置好的，一般了解就行了，不要更改配置文件是&#x2F;etc&#x2F;crontab</li>
</ol>
</blockquote>
<ol>
<li>文件&#x2F;etc&#x2F;crontab</li>
</ol>
<pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">For details see man 4 crontabs</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">Example of job definition:</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">.---------------- minute (0 - 59)</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">| .------------- hour (0 - 23)</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">| | .---------- day of month (1 - 31)</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">| | | .------- month (1 - 12) OR jan,feb,mar,apr ...</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">| | | | .----dayofweek(0-6)(Sunday=0or7)OR sun,mon,tue,wed,thu,fri,sat</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">| | | | |</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">* * * * * user-name <span class="hljs-built_in">command</span> to be executed</span>
language-shell复制代码</code></pre>

<hr>
<h3 id="5-用户级的计划任务"><a href="#5-用户级的计划任务" class="headerlink" title="5.用户级的计划任务"></a>5.用户级的计划任务</h3><ol>
<li>crontab 常用选项</li>
</ol>
<ul>
<li>-e: 编辑计划任务 edit</li>
<li>-l: 查看计划任务 display</li>
<li>-u: 指定用户 user</li>
<li>-r: 删除计划任务 remove</li>
</ul>
<ol>
<li>示例</li>
</ol>
<pre><code class="hljs bash"><span class="hljs-comment"># 每月1、10、22日的4:45重启network服务</span>
45 4 1,10,22 * * systemctl restart network
45 4 1,10,22 * * /usr/bin/systemctl restart network

<span class="hljs-comment"># 每周六、周日的1:10重启network服务</span>
10 1 * * 6-7 sytemctl restart network

<span class="hljs-comment"># 每天18:00至23:00之间每隔30分钟重启network服务</span>
*/30 18-23 * * * systemctl restart network

<span class="hljs-comment"># 每隔两天的上午8点到11点的第3和第15分钟执行一次重启</span>
3,15 8-11 */2 * * systemctl reboot
<span class="hljs-comment"># 每周日凌晨2点30分，运行cp命令对/etc/fstab文件进行备份，存储位置为/backup/fstab-YYYY-MM-DD-hh-mm-ss;</span>
<span class="hljs-comment"># date +%F-%H-%M-%S &gt; 2021-06-09-09-35-38</span>
30 2 * * 7 <span class="hljs-built_in">cp</span> /etc/fatab /backup/fstab-date +\%F-\%H-\%M-\%S
30 2 * * 0 <span class="hljs-built_in">cp</span> /etc/fatab /backup/fstab-date +\%F-\%H-\%M-\%S

<span class="hljs-comment"># 晚上11点到早上7点之间，每隔一小时重启smb</span>
0 23,0-7/1 * * * systemctl restart smb
</code></pre>

<blockquote>
<ol>
<li><code>注意1：</code>vim &#x2F;etc&#x2F;crontab (系统级) 与 crontab -e (用户自定义)写入的定时运行的区别</li>
<li><code>注意2：</code>用户自定义的定时任务文件路径：&#x2F;var&#x2F;spool&#x2F;cron&#x2F;username</li>
</ol>
</blockquote>
<ol>
<li>再玩一次</li>
</ol>
<blockquote>
<ol>
<li>设置一次性计划任务在 18:00 时关闭系统，并查看任务 信息。</li>
<li>每周日凌晨 2 点 30 分，运行 cp 命令对&#x2F;etc&#x2F;fstab 文件进行 备份，存储位置为&#x2F;backup&#x2F;fstab-YYYY-MM-DD-hh-mm- ss。</li>
<li>每周 2、4、7 备份&#x2F;var&#x2F;log&#x2F;secure 文件至&#x2F;logs 目录中， 文件名格式为“secure-yyyymmdd”。</li>
<li>每两小时取出当前系统&#x2F;proc&#x2F;meminfo 文件中以 S 或 M 开 头的行信息追加至&#x2F;tmp&#x2F;meminfo.txt 文件中。</li>
</ol>
</blockquote>
<pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1.设置一次性计划任务在18:00时关闭系统，并查看任务 信息。</span>
at 18:00
systemctl poweroff
at -l
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">2.每周日凌晨2点30分，运行<span class="hljs-built_in">cp</span>命令对/etc/fstab文件进行 备份，存储位置为/backup/fstab-YYYY-MM-DD-hh-mm-ss。</span>
30 2 * * 7 cp /etc/fstab /backup/fstab-$(date +\%F-\%H-\%M-\%S)
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">3.每周2、4、7备份/var/log/secure文件至/logs目录中， 文件名格式为“secure-yyyymmdd”。</span>
0 0 * * 2,4,7 cp /var/log/secure /logs/secure-$(date + \%Y\%m\%d)
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">4.每两小时取出当前系统/proc/meminfo文件中以S或M开 头的行信息追加至/tmp/meminfo.txt文件中。</span>
0 */2 * * * grep ^[SM] /proc/meminfo  &gt;&gt; /tem/meminfo.txt
language-shell复制代码</code></pre>

<hr>
<h3 id="6-rsyslog-日志管理"><a href="#6-rsyslog-日志管理" class="headerlink" title="6.rsyslog 日志管理"></a>6.rsyslog 日志管理</h3><ol>
<li>简介</li>
</ol>
<blockquote>
<ol>
<li>Centos6.x 日志服务已经由 rsyslogd 取代了原先的 syslogd 服务,有如下优点</li>
<li>基于 TCP 网络协议传输日志信息;</li>
<li>更安全的网络传输方式;</li>
<li>有日志消息的及时分析框架;</li>
<li>后台数据库;</li>
<li>配置文件中可以写简单的逻辑判断; ü 与 syslog 配置文件相兼容。</li>
</ol>
</blockquote>
<ol>
<li>系统中常见的日志文件</li>
</ol>
<blockquote>
<ol>
<li><code>/var/log/message</code> 系统重要的日志</li>
<li><code>/var/log/cron</code> 定时任务的日志</li>
<li><code>/var/log/dmesg</code> 开机时内核自检的信息</li>
<li><code>lastb /var/log/btmp</code> 错误登录的日志</li>
<li><code>last /var/log/wtmp</code>所有用户登录和注销信息</li>
<li><code>/var/run/utmp</code>记录当前已经登录的用户信息，要使用 w,who,users 等命令查询</li>
<li><code>/var/log/secure</code>记录验证和授权方面的信息</li>
</ol>
</blockquote>
<ol>
<li>日志格式。</li>
</ol>
<blockquote>
<ol>
<li>只要是由日志服务 rsyslogd 记录的日志文件，他们的格式是一样的。基本日志格式包含以下四列:</li>
<li><code>事件产生的时间</code>,;<code>发生事件的服务器的主机名</code>;<code>产生事件的服务名或程序名</code>;<code>事件的具体信息。</code></li>
</ol>
</blockquote>
<pre><code class="hljs shell">tail -2 /var/log/messages
Jun  9 10:11:03 localhost dbus[6555]: [system] Activating service name=&#x27;org.freedesktop.problems&#x27; (using servicehelper)
Jun  9 10:11:03 localhost dbus[6555]: [system] Successfully activated service &#x27;org.freedesktop.problems&#x27;
language-shell复制代码</code></pre>

<ol>
<li>&#x2F;etc&#x2F;rsyslog.conf 配置文件格式</li>
</ol>
<blockquote>
<ol>
<li>服务名：*, authpriv, cron, ftp, daemon(守护进程), kern, mall, syslog, user</li>
<li>连接符号：<code>.</code>(大于), <code>.=</code>(等于),<code>.!</code>(不等于)</li>
<li>日志级别: null, debug, info, notice, warning, err(错误), crit(临界状态), alert(警告), emerg(疼痛，宕机)</li>
<li>日志记录位置：文件，远程主机(tcp@@IP:514, udp@IP)需要在线，并用户对等传输(root-&gt;root)</li>
</ol>
</blockquote>
<pre><code class="hljs shell">服务名称[连接符号]日志等级 日志记录位置
authpriv.* /var/log/secure
认证相关服务.所有日志等级 记录在/var/log/secure 日志中
language-shell复制代码</code></pre>

<ol>
<li>日志服务 rsyslogd</li>
</ol>
<p>存放日志的服务器（开启接受功能）:192.168.17.130</p>
<pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">编辑配置文件</span>
vim /etc/rsyslog.conf
language-shell复制代码
<span class="hljs-meta prompt_"># </span><span class="language-bash">Provides UDP syslog reception 开启UDP传输</span>
<span class="hljs-meta prompt_">$</span><span class="language-bash">ModLoad imudp</span>
<span class="hljs-meta prompt_">$</span><span class="language-bash">UDPServerRun 514</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">Provides TCP syslog reception 开启TCP传输</span>
<span class="hljs-meta prompt_">$</span><span class="language-bash">ModLoad imtcp</span>
<span class="hljs-meta prompt_">$</span><span class="language-bash">InputTCPServerRun 514</span>
language-shell复制代码
<span class="hljs-meta prompt_"># </span><span class="language-bash">重启服务</span>
systemctl restart rsyslog
<span class="hljs-meta prompt_"># </span><span class="language-bash">查看514端口是否在监听</span>
netstat -tnlup | grep :514
<span class="hljs-meta prompt_"># </span><span class="language-bash">实时查看日志后，进行测试</span>
tail /var/log/maillog -f
language-shell复制代码</code></pre>

<p>产生日志服务器（发送日志）:192.168.17.133</p>
<pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">默认端口为514</span>
echo &#x27;mail.info @192.168.17.130:514&#x27;&gt;&gt; /etc/rsyslog.conf
<span class="hljs-meta prompt_"># </span><span class="language-bash">测试</span>
[root@localhost ~]# systemctl restart rsyslog # 重启服务
<span class="hljs-meta prompt_"># </span><span class="language-bash">发送测试消息</span>
[root@localhost ~]# logger -p mail.info &quot;this is a test for rmote log.&quot;
language-shell复制代码</code></pre>

<ol>
<li>作业</li>
</ol>
<p>扩展：集中日志管理工具 elk, 有收集，分析，展示日志功能，并支持分布式</p>
<pre><code class="hljs shell">1.将authpriv设备日志记录到 /var/log/auth.log
	1).修改日志文件位置
<span class="hljs-meta prompt_">	# </span><span class="language-bash">vim /etc/rsyslog.conf</span>
<span class="hljs-meta prompt_">	#</span><span class="language-bash">authpriv.* /var/log/secure</span>
	authpriv.* /var/log/auth.log
	2).重启程序，触发日志生成
<span class="hljs-meta prompt_">	# </span><span class="language-bash">systemctl restart rsyslog.service</span>
<span class="hljs-meta prompt_">	# </span><span class="language-bash">ll /var/log/auth.log</span>
2.改变应用程序sshd的日志设备为local5,并定义lcoal5设备日志记录到/var/log/local5.local。
	1).设置ssh程序的日志设备为自定义设备。
<span class="hljs-meta prompt_">	# </span><span class="language-bash">vim /etc/ssh/sshd_config</span>
<span class="hljs-meta prompt_">	#</span><span class="language-bash">SyslogFacility AUTHPRIV</span>
	SyslogFacility FOCAL5
	2).设置自定义设备日志文件存放位置。
<span class="hljs-meta prompt_">	# </span><span class="language-bash">vim /etc/rsyslog.conf</span>
	local5.* /var/log/local5.local
	3).重启失效
<span class="hljs-meta prompt_">	# </span><span class="language-bash">systemctl restart ssh // 重启sshd程序</span>
<span class="hljs-meta prompt_">	# </span><span class="language-bash">systemctl restart rsyslog // 重启日志</span>
	4).尝试登录，触发日志。
	5).观察日志。理解自定义日志设备。
3.使用logger程序写日志到指定的设备及级别。
	服务器1(192.168.17.133)发送日志
<span class="hljs-meta prompt_">	# </span><span class="language-bash">vim /etc/ssh/sshd_config</span>
<span class="hljs-meta prompt_">	#</span><span class="language-bash">SyslogFacility AUTHPRIV // 将原来配置注释</span>
	SyslogFacility LOCAL5 // 自定义接受设备 local5
<span class="hljs-meta prompt_">	# </span><span class="language-bash">vim /etc/rsyslog.conf // 此文件来管理日志</span>
	local5.* @192.168.17.130:514 // 此处填写日志服务器的IP地址
<span class="hljs-meta prompt_">	# </span><span class="language-bash">systemctl restart sshd // 重启sshd程序</span>
<span class="hljs-meta prompt_">	# </span><span class="language-bash">systemctl restart rsyslog // 重启日志</span>

	服务器2(192.168.17.130)接受日志
<span class="hljs-meta prompt_">	# </span><span class="language-bash">vim /etc/rsyslog.conf</span>
<span class="hljs-meta prompt_">	$</span><span class="language-bash">ModLoad imudp</span>
<span class="hljs-meta prompt_">	$</span><span class="language-bash">UDPServerRun 514 // 这两个注释去掉，使用udp</span>
	local5.* /var/log/server12.log
<span class="hljs-meta prompt_">	# </span><span class="language-bash">systemctl restart rsyslog</span>
	尝试ssh登录服务器1,并观察本地日志
<span class="hljs-meta prompt_">	# </span><span class="language-bash"><span class="hljs-built_in">tail</span> -f /var/log/server12.<span class="hljs-built_in">log</span></span>
language-shell复制代码</code></pre>

<hr>
<h3 id="7-logrotate-日志轮转"><a href="#7-logrotate-日志轮转" class="headerlink" title="7.logrotate 日志轮转"></a>7.logrotate 日志轮转</h3><ol>
<li>简介</li>
</ol>
<blockquote>
<ol>
<li>日志轮转也叫日志轮替，日志切割:</li>
<li>如果没有日志轮转，日文件会越来越大;</li>
<li>将丢弃系统中最旧的日志文件，以节省空间;</li>
<li>logrotate 本身不是系统守护进程，它是通过计划任务 crond 每天执行;</li>
</ol>
</blockquote>
<pre><code class="hljs shell">cat /etc/cron.daily/logrotate
language-shell复制代码
<span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/sh</span>
/usr/sbin/logrotate -s /var/lib/logrotate/logrotate.status /etc/logrotate.conf
EXITVALUE=$?
if [ $EXITVALUE != 0 ]; then
    /usr/bin/logger -t logrotate &quot;ALERT exited abnormally with [$EXITVALUE]&quot;
fi
exit 0
language-shell复制代码</code></pre>

<ol>
<li>日志文件命名规则</li>
</ol>
<p>日志轮替最主要的作用就是把旧的日志文件移动并改名， 同时建立新的空日志文件，当旧日志文件超出保存的范围 之后，就会进行删除。那么旧的日志文件改名之后，如何 命名呢?主要依靠&#x2F;etc&#x2F;logrotate.conf 配置文件中<br>“dateext”参数:</p>
<ul>
<li>如果配置文件中拥有“dateext”参数，那么日志会用日期来作为日志文件的后缀，例如“secure-20180605”。这样的话日志文件名不会重叠，所以也就不需要日志文件的改名，只需要保存指定的日志个数，删除多余的日志文件即可。</li>
<li>如果配置文件中没有“dateext”参数，那么日志文件就需要 进行改名了。当第一次进行日志轮替时，当前的“secure”日志会自动改名为“secure.1”，然后新建“secure”日志，用 来保存新的日志。当第二次进行日志轮替时，“secure.1”会 自动改名为“secure.2”，当前的“secure”日志会自动改名 为“secure.1”，然后也会新建“secure”日志，用来保存新 的日志，以此类推。</li>
</ul>
<ol>
<li>logrotate 配置文件</li>
</ol>
<pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">vim /etc/logrotate.conf</span>
weekly  // 轮转的周期，一周轮转
rotate 4 // 保留4份
create // 轮转后创建新文件
dateext // 使用日期作为后缀
<span class="hljs-meta prompt_">#</span><span class="language-bash">compress // 是否压缩，</span>
include /etc/logrotate.d // 包含该目录下的文件也轮询

/var/log/wtmp &#123; // 对该日志文件设置轮转的方法
    monthly	// 一月轮转一次
    create 0664 root utmp	// 轮转后创建新文件，并设置权限
    minsize 1M	// 最小达到1M才轮转
    rotate 1	// 保留一份
&#125;
/var/log/btmp &#123;
    missingok	// 丢失不提示
    monthly	// 每月轮转一次
    create 0600 root utmp	// 轮转后创建新文件，并设置权限
    rotate 1	// 保留一份
&#125;
language-shell复制代码</code></pre>

<p>其他配置信息</p>
<ul>
<li>size 大小:日志只有大于指定大小才进行日志轮替，而不是按 照时间轮替。如 size 100k</li>
<li>prerotate&#x2F;endscript:在日志轮替之前执行脚本命令。 endscript 标示 prerotate 脚本结束。</li>
<li>postrotate&#x2F;endscript:在日志轮替之后执行脚本命令。 endscript 标示 postrotate 脚本结</li>
</ul>
<p>logrotate 命令的格式</p>
<ul>
<li>[root@localhost ~]# logrotate [选项] 配置文件名</li>
<li>选项: 如果此命令没有选项，则会按照配置文件中的条件进行日志轮替<br>-v: 显示日志轮替过程。加了-v 选项，会显示日志的轮替的过程<br>-f: 强制进行日志轮替。不管日志轮替的条件是否已经符合，强制配置文件中所有的日志进行轮替</li>
</ul>
<ol>
<li>轮转案例:对&#x2F;var&#x2F;log&#x2F;err.log 轮转</li>
</ol>
<pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">vim /etc/logrotate.d/err_log <span class="hljs-comment"># 编辑轮转规则</span></span>
/var/log/err.log &#123;
        # 每天轮转
        daily
        # 使用日期命名
        dateext
        # 创建新文件
        create
        # 保留5分
        rotate 5
        # 丢失不提示
        missingok
&#125;
<span class="hljs-meta prompt_"></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">logrotate -f /etc/logrotate.d/err_log <span class="hljs-comment"># 手动强制启动轮转</span></span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">ll /var/log/</span>
-rw-------. 1 root   root    11449 6月   8 03:31 boot.log-20210608
language-shell复制代码</code></pre>

<ol>
<li>作业</li>
</ol>
<pre><code class="hljs shell">logrotate日志轮转

1、将我们自己生产的/var/log/err.log 日志志加入日志轮替的策略
	vim /etc/logrotate.d/err
<span class="hljs-meta prompt_">	# </span><span class="language-bash">创建err文件，把/var/log/err.log加入轮替</span>

	/var/log/err.log &#123;
		weekly				#每周轮替一次
		rotate 6			#保留6个轮替日志
		sharedscripts		#以下命令只执行一次
		prerotate
			/usr/bin/chattr -a /var/log/err.log
<span class="hljs-meta prompt_">			#</span><span class="language-bash">在日志轮替前取消a属性，以便让日志可以轮替</span>
		endscript

		sharedscripts
		postretate
			/usr/bin/chattr +a /var/log/err.log
<span class="hljs-meta prompt_">			#</span><span class="language-bash">日志轮替完毕再加上a属性</span>
		endscript

		sharedscripts
		postrotate
			/bin/kill -HUP $(/bin/cat /var/run/syslogd.pid 2&gt;/dev/null) &amp;&gt;/dev/null
<span class="hljs-meta prompt_">			#</span><span class="language-bash">重启rsyslog服务，确保日志轮替正常</span>
		endscript
	&#125;

2、要把 Nginx 服务的日志加入日志轮替，则也需要重启 Nginx 服务
	首先，安装nginx
	// yum install http://nginx.org/packages/rhel/7/x86_64/RPMS/nginx-1.10.3-1.el7.ngx.x86_64.rpm
	其次，启动服务后，客户端访问及可产生日志
<span class="hljs-meta prompt_">		# </span><span class="language-bash">systemctl start nginx</span>
<span class="hljs-meta prompt_">		# </span><span class="language-bash">systemctl <span class="hljs-built_in">enable</span> nginx#</span>
<span class="hljs-meta prompt_">		# </span><span class="language-bash"><span class="hljs-built_in">ls</span> /var/log/nginx/</span>
		access.log  error.log

	最后，对访问和错误日志加入轮替
	vim /etc/logrotate.d/nginx
	/var/log/nginx/access.log /var/log/nginx/error.log &#123;
		daily
		rotate 15
		sharedscripts
		postrotate
			/bin/kill -HUP $(/bin/cat /var/run/syslogd.pid) &amp;&gt;/dev/null
<span class="hljs-meta prompt_">			#</span><span class="language-bash">重启 rsyslog 服务</span>
			/bin/kill -HUP $(/bin/cat /var/run/nginx.pid) &amp;&gt;/dev/null
<span class="hljs-meta prompt_">			#</span><span class="language-bash">重启 Nginx 服务</span>
		endscript
	&#125;
language-shell复制代码</code></pre>

<h3 id="8-sshd"><a href="#8-sshd" class="headerlink" title="8.sshd"></a>8.sshd</h3><ol>
<li>sshd 简介</li>
</ol>
<ul>
<li>传统的网络服务程序，如:ftp 和 telnet 在本质上都是不安全的，因为它们在网络上用明文传送口令和数据，别有用心的人非常容易就可以截获这些口令和数据。</li>
<li>演示 tcpdump 截获 ftp 用户名和密码。</li>
</ul>
<pre><code class="hljs shell">1.前置条件
[root@localhost ~]# yum install vsftpd -y	// 安装 ftp 服务期端
[root@localhost ~]# systemctl start vsftpd	// 启动 ftp 服务
[root@localhost ~]# yum install tcpdump		// 安装 tcpdump
[root@localhost ~]# tcpdump -i ens33 -nnX port 21	// 使用 tcpdump 监听 21端口

[root@localhost ~]# useradd ftpuser	// 创建ftp测试用户
[root@localhost ~]# echo &quot;hadoop&quot; | passwd --stdin ftpuser
language-shell复制代码</code></pre>

<hr>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以邮件至 hjxstart@126.com </span>
    </div>
</article>








    




    </div>
    <div class="copyright">
        <p class="footer-entry"><span class="miit">
                <img src="/img/gov.png" title="中华人民共和国工业和信息化部">
                <a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">粤ICP备2021170625号-1</a>
        </span>
    
    ©2019-2022 hjxstart
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("/img/article-list-bg-img.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
